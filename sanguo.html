<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ— åŒå¿— â€” Vue UI</title>

  <!-- å­—ä½“ä¸å›¾æ ‡ï¼ˆä½ å·²æä¾›ï¼‰ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Merriweather:ital,wght@0,400;1,400&family=Noto+Sans+SC:wght@400;500;700&family=Almendra+SC&family=Cinzel+Decorative:wght@700&family=EB+Garamond&family=Josefin+Sans&family=Playfair+Display&family=Roboto+Slab&family=Spectral&display=swap" rel="stylesheet">

  <!-- ä¾èµ–ï¼šVue 3ï¼ˆglobal buildï¼‰, Pinia (IIFE), Lodash (_) -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pinia@2/dist/pinia.iife.prod.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>

  <style>
    /* --- [ CSS (v26) â€” åŸæ ·æ•´åˆå¹¶åŒ…å« scopeId æ ‡è¯†ç¬¦ ] --- */

    /* åŸºç¡€ç»„ä»¶: CommonStatus */
    .details-status[data-v-6dac0e4c]{margin-bottom:6px;border:1px solid var(--theme-border-light,#d3c5b3);border-radius:4px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:all .3s ease-in-out}
    .details-status[data-v-6dac0e4c]:hover{transform:translateY(-3px);box-shadow:0 6px 15px rgba(0,0,0,.25)}
    .details-status.locked .summary[data-v-6dac0e4c]{background-color:var(--theme-disabled-bg,#e8e4e0);color:var(--theme-disabled-text,#b5aaa2);cursor:not-allowed}
    .details-status.locked .summary .icon-star[data-v-6dac0e4c]{color:var(--theme-disabled-text,#b5aaa2)}
    .summary[data-v-6dac0e4c]{font-family:"Cinzel",serif;font-weight:700;color:var(--theme-text-tertiary,#5d4037);background-color:var(--theme-title-bg,#d7c8b6);padding:4px 15px;cursor:pointer;list-style:none;border-bottom:1px solid var(--theme-border-dark,#c6b8a5);text-align:left;transition:background-color .2s ease,color .2s ease}
    .summary[data-v-6dac0e4c]:hover{background-color:var(--theme-title-bg-hover,#cbb8a5);color:var(--theme-text-primary,#4a3b31)}
    .is-open .summary[data-v-6dac0e4c]{background-color:var(--theme-open-bg,#bfa996);border-bottom-color:var(--theme-open-border-color,#a39281)}
    .summary.has-wrapped-summary[data-v-6dac0e4c]{padding-bottom:8px}
    .summary-main-line[data-v-6dac0e4c]{display:flex;align-items:center;width:100%}
    .icon-star[data-v-6dac0e4c]{font-size:1.1em;color:var(--theme-star-inactive,#a39281);text-shadow:none;margin-right:12px;flex-shrink:0;transform-origin:center center;transition:transform .4s cubic-bezier(0.68,-0.55,0.27,1.55),color .4s ease,text-shadow .4s ease}
    .icon-star.is-open[data-v-6dac0e4c]{transform:rotate(360deg);color:var(--theme-star-active,#f7d75a);text-shadow:0 0 3px hsla(0,0%,100%,.8),0 0 6px var(--theme-star-active,#f7d75a),0 0 10px #e5a50a}
    .summary-title[data-v-6dac0e4c]{flex:1}
    .summary-details[data-v-6dac0e4c]{margin-left:auto;padding-right:15px;font-family:"Noto Sans SC","Courier New",monospace;font-weight:500;font-size:.8em;color:var(--theme-text-secondary,#6a514d);letter-spacing:.5px;text-shadow:0 0 1px rgba(0,0,0,.05);align-self:center;flex-shrink:0}
    .summary-wrapped-details[data-v-6dac0e4c]{margin-top:6px;padding-left:22px;padding-right:10px;font-family:"Noto Sans SC","Courier New",monospace;font-weight:500;font-size:.8em;color:var(--theme-text-secondary,#6a514d);letter-spacing:.5px;text-shadow:0 0 1px rgba(0,0,0,.05);line-height:1.4;word-break:auto-phrase}
    .arrow-toggle[data-v-6dac0e4c]{transition:transform .2s ease-in-out;font-size:.8em;padding-left:5px;margin-left:auto;flex-shrink:0}
    .arrow-toggle.rotated[data-v-6dac0e4c]{transform:rotate(90deg)}
    .details-content[data-v-6dac0e4c]{background-color:var(--theme-background-tertiary,#fdfaf5);opacity:var(--theme-background-tertiary-opacity,.9);transition:height .2s ease-in-out;overflow:hidden}
    .details-content-inner[data-v-6dac0e4c]{padding:15px;text-align:left;font-size:.9em}
    .collapse-enter-active[data-v-6dac0e4c],.collapse-leave-active[data-v-6dac0e4c]{transition:height .2s ease-in-out;overflow:hidden}
    .collapse-enter-from[data-v-6dac0e4c],.collapse-leave-to[data-v-6dac0e4c]{height:0 !important}
    .details-sub-section .details-content-inner[data-v-6dac0e4c]{padding-top:5px;padding-bottom:5px}
    .details-entry .summary[data-v-6dac0e4c]{padding-top:.8px;padding-bottom:.8px;font-size:.9em}
    .details-entry .details-content-inner[data-v-6dac0e4c]{padding:10px 15px}

    /* åŸºç¡€å¸ƒå±€: App */
    .layout[data-v-4aab5234]{display:flex;flex-direction:column;padding:15px;background-color:var(--theme-background,#f0e6d2);opacity:var(--theme-background-opacity,1);border:var(--theme-main-border-width,2px) solid var(--theme-main-border,#785a4e);border-radius:8px;overflow:hidden}
    
    /* åŸºç¡€ç»„ä»¶: WorldStatus */
    .world-status[data-v-77b8dafd]{display:flex;flex-direction:column;gap:8px;background-color:var(--theme-background-secondary,#e8ddcb);padding:10px 15px;margin-bottom:15px;border:1px solid var(--theme-border-dark,#c6b8a5);border-radius:4px;box-shadow:0 2px 5px rgba(0,0,0,.1);transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}
    .world-status[data-v-77b8dafd]:hover{transform:translateY(-3px);box-shadow:0 4px 10px rgba(0,0,0,.2)}
    .world-info[data-v-77b8dafd]{margin:0;display:flex;align-items:center;gap:6px;line-height:1.6}
    .info-icon[data-v-77b8dafd]{flex-shrink:0;line-height:1}
    .info-label[data-v-77b8dafd]{font-weight:500;color:var(--theme-text-primary,#4a3b31);flex-shrink:0;line-height:1}

    /* [!] B. â€œæ— åŒå¿—â€çš„ç‰¹å®šä¸­å¼é£æ ¼ (æ–°) */
    
    /* è¦†ç›–å˜é‡ï¼Œå®ç°æˆ‘ä»¬çš„â€œç¾Šçš®çº¸â€é£æ ¼ */
    :root {
        --theme-background: #f5eeda;
        --theme-main-border: #c9b89a;
        --theme-background-secondary: #f8f3e8;
        --theme-border-dark: #dcd0b8;
        --theme-title-bg: #f8f3e8;
        --theme-title-bg-hover: #f5f1eb;
        --theme-open-bg: #f0e9d9;
        --theme-open-border-color: #c9b89a;
        --theme-background-tertiary: #fdfaf2;
        --theme-text-primary: #3a2c1a;
        --theme-text-secondary: #6a4f3a;
        --theme-text-tertiary: #594228;
        --theme-star-inactive: #a39281;
        --theme-star-active: #f7d75a;
    }

    /* åŸºç¡€å­—ä½“å’Œé€šç”¨æ ·å¼ */
    * { box-sizing: border-box; }
    .layout[data-v-4aab5234] {
        font-family: 'EB Garamond', 'Noto Sans SC', serif; 
        color: #4a3b2a;
    }
    .value-main { font-weight: 500; color: #3a2c1a; }
    .property-name { font-weight: bold; color: #594228; }
    .empty-state-text { color: #888; font-style: italic; opacity: 0.8; padding: 15px;}
    
    /* å¤´éƒ¨å’Œè¯— */
    .scroll-header[data-v-wushuang-header] {
        display: flex;
        justify-content: space-between; 
        align-items: flex-start;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--theme-main-border);
        margin-bottom: 20px;
    }
    .master-ui-title h1[data-v-wushuang-header] {
        font-family: 'Cinzel Decorative', serif; 
        font-size: 2.8em; font-weight: 700; margin: 0; color: #594228;
        text-shadow: none; 
    }
    .scroll-poem-container h1[data-v-wushuang-header] {
        font-family: 'Cinzel Decorative', serif; 
        font-size: 1.8em; 
        color: #594228;
        text-shadow: none; 
    }
    .scroll-poem-container[data-v-wushuang-header] { text-align: right; }
    .poem-grid[data-v-wushuang-header] {
        display: grid; grid-template-columns: auto auto; 
        gap: 5px 20px; padding: 10px 0;
        font-family: 'Noto Sans SC', serif; 
        font-size: 1.0em; 
        color: #6a4f3a;
        text-align: right; 
    }
    .poem-grid p[data-v-wushuang-header] { margin: 0; }
    
    /* è§’è‰²/è¡Œå›Šçš„å†…éƒ¨æ ·å¼ */
    .ws-section-content[data-v-wushuang-char] { padding: 15px; }
    .ws-section-content.no-padding[data-v-wushuang-char] { padding: 0; }
    .ws-sub-section-content[data-v-wushuang-char] { padding: 10px 15px; }
    .char-property-grid[data-v-wushuang-char] {
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 8px 15px;
        align-items: center;
    }
    .char-icon[data-v-wushuang-char] { opacity: 0.8; color: #6a4f3a; }
    .item-row[data-v-wushuang-char] {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        border-bottom: 1px solid rgba(74,59,42,0.1);
    }
    hr[data-v-wushuang-char] { 
        border: 0; 
        height: 1px; 
        background-image: linear-gradient(to right, transparent, rgba(74,59,42,0.2), transparent); 
        margin: 15px 0; 
    }
    h4[data-v-wushuang-char] {
        font-family: 'Cinzel', serif;
        color: #594228;
        font-weight: 700;
        margin-bottom: 10px;
    }

    /* é¡µé¢å®¹å™¨å°è°ƒæ•´ï¼Œæ–¹ä¾¿ç›´æ¥é¢„è§ˆ */
    body { background: #f7f3ee; margin: 20px; font-family: "Noto Sans SC", "EB Garamond", sans-serif; }
    #app { max-width: 920px; margin: 0 auto; }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    (function(){
      // åˆ«åæ–¹ä¾¿ä½¿ç”¨ï¼ˆå’Œä½ åŸå§‹ä»£ç é£æ ¼ä¸€è‡´ï¼‰
      const VueGlobal = window.Vue;
      const PiniaGlobal = window.Pinia;
      const _ = window._;

      if (!VueGlobal) {
        console.error('Vue æœªåŠ è½½ â€” è¯·æ£€æŸ¥ CDN è„šæœ¬');
        return;
      }
      if (!PiniaGlobal) {
        console.error('Pinia æœªåŠ è½½ â€” è¯·æ£€æŸ¥ CDN è„šæœ¬');
        return;
      }
      if (!_) {
        console.error('Lodash æœªåŠ è½½ â€” è¯·æ£€æŸ¥ CDN è„šæœ¬');
        // ç»§ç»­ä½†è®¸å¤šæ•°æ®è®¿é—®ä¼šå¤±è´¥
      }

      const { createApp, ref, computed, defineComponent, onMounted, onUnmounted, Transition, openBlock, createElementBlock, createElementVNode, createVNode, withCtx, withDirectives, vShow, toDisplayString, renderSlot, createBlock, normalizeClass, toHandlers, renderList, Fragment, openBlock: ob } = VueGlobal;

      // ç®€å•çš„ attach scope helperï¼ˆæ›¿ä»£åŸå§‹æ‰“åŒ…å™¨ç”Ÿæˆçš„å‡½æ•°ï¼‰
      function attachScope(component, metaArray) {
        // component å¯èƒ½æ˜¯ defineComponent è¿”å›çš„å¯¹è±¡æˆ–å¸¦ __vccOpts çš„æ„é€ 
        const opts = component.__vccOpts || component;
        for (const [k, v] of metaArray) {
          opts[k] = v;
        }
        return component;
      }

      // å®‰å…¨è°ƒç”¨å®¿ä¸»ä¸Šä¸‹æ–‡å‡½æ•°ï¼ˆgetVariables / getCurrentMessageIdï¼‰
      function safeGetVariables() {
        try {
          if (typeof getVariables === 'function' && typeof getCurrentMessageId === 'function') {
            return getVariables({ type: 'message', message_id: getCurrentMessageId() }) || {};
          } else {
            console.warn('å®¿ä¸»æœªæä¾› getVariables / getCurrentMessageId â€”â€” ä½¿ç”¨ç©ºæ•°æ®å›é€€ã€‚');
            return {};
          }
        } catch (err) {
          console.error('è°ƒç”¨ getVariables å¤±è´¥:', err);
          return {};
        }
      }

      // --- useStatData (åŸ o() é‡å‘½å) ---
      function useStatData() {
        const statData = ref(null);
        const loading = ref(true);
        const error = ref(null);

        const loadData = () => {
          try {
            const vars = safeGetVariables();
            const n = _ ? _.get(vars, 'stat_data', {}) : (vars.stat_data || {});
            if (!n || Object.keys(n).length === 0) throw new Error('æ— æ³•è·å–çŠ¶æ€æ•°æ®');
            statData.value = n;
            error.value = null;
          } catch (e) {
            console.error('åŠ è½½æ•°æ®å¤±è´¥:', e);
            error.value = e instanceof Error ? e.message : String(e);
          } finally {
            loading.value = false;
          }
        };

        onMounted(() => { loadData(); });

        return { statData, loading, error, loadData };
      }

      // è¾…åŠ©å‡½æ•°ï¼ˆæ¥è‡ªä½ ï¼‰
      function r(obj, path, def) { return _ ? _.get(obj, path, def) : (function(){try{ const parts = path.split('.'); let cur = obj; for (let p of parts){ // support simple bracket like 'è¡Œå›Š.èƒŒåŒ…[0]'
            const bracket = p.match(/(.+?)\[(\d+)\]$/);
            if (bracket) { cur = cur?.[bracket[1]]?.[parseInt(bracket[2])] } else { cur = cur?.[p]; }
          } return cur === undefined ? def : cur;}catch(e){return def;}})(); }
      function c(obj) { return obj && typeof obj === 'object' ? (_.omitBy ? _.omitBy(obj, (v,k)=> k === '$meta' || k === '$__META_EXTENSIBLE__$') : obj) : {}; }
      function s(val) { return Array.isArray(val) ? (val.length === 0 || val[0] === '$__META_EXTENSIBLE__$' ? [] : val) : (val || ''); }

      // --- CommonStatus ç»„ä»¶ (å·²æŒ‰ä½ æä¾›çš„ render é£æ ¼å®ç°) ---
      const CommonStatus = defineComponent({
        __name: 'CommonStatus',
        props: {
          title: {},
          summaryDetails: { default: '' },
          defaultOpen: { type: Boolean, default: false },
          locked: { type: Boolean, default: false },
          variant: { default: 'section' },
          icon: { default: '' },
          customClass: { default: '' }
        },
        setup(props, ctx) {
          const opened = ref(props.defaultOpen);
          const innerWidth = ref(window.innerWidth);
          const onResize = () => { innerWidth.value = window.innerWidth; };
          onMounted(() => window.addEventListener('resize', onResize));
          onUnmounted(() => window.removeEventListener('resize', onResize));

          const wrapped = computed(() => {
            if (!props.summaryDetails) return false;
            const len = props.summaryDetails.length;
            return innerWidth.value <= 600 ? len > 10 : innerWidth.value <= 1000 ? len > 30 : len > 50;
          });

          const classList = computed(() => {
            const arr = ['details-status', `details-${props.variant}`];
            if (props.locked) arr.push('locked');
            if (opened.value) arr.push('is-open');
            if (props.customClass) arr.push(props.customClass);
            return arr.join(' ');
          });

          const toggle = () => { if (!props.locked) opened.value = !opened.value; };

          // animation hooks (manipulate height)
          const onEnter = el => { el.style.height = '0'; el.style.overflow = 'hidden'; void el.offsetHeight; el.style.height = `${el.scrollHeight}px`; };
          const afterEnter = el => { el.style.height = ''; el.style.overflow = ''; };
          const onLeave = el => { el.style.height = `${el.scrollHeight}px`; el.style.overflow = 'hidden'; void el.offsetHeight; el.style.height = '0'; };
          const afterLeave = el => { el.style.height = ''; el.style.overflow = ''; };

          return () => {
            return VueGlobal.h('div', { class: classList.value }, [
              VueGlobal.h('div', { class: ['summary', { 'has-wrapped-summary': wrapped.value }], onClick: toggle }, [
                VueGlobal.h('div', { class: 'summary-main-line' }, [
                  VueGlobal.h('span', { class: ['icon-star', { 'is-open': opened.value }] }, props.icon || 'âœ¦'),
                  VueGlobal.h('span', { class: 'summary-title' }, ctx.slots.title ? ctx.slots.title() : props.title),
                  props.summaryDetails && !wrapped.value ? VueGlobal.h('span', { class: 'summary-details' }, props.summaryDetails) : null,
                  VueGlobal.h('span', { class: ['arrow-toggle', { rotated: opened.value }] }, 'â–¼')
                ]),
                props.summaryDetails && wrapped.value ? VueGlobal.h('div', { class: 'summary-wrapped-details' }, props.summaryDetails) : null
              ]),
              VueGlobal.h(Transition, {
                name: 'collapse',
                onEnter,
                onAfterEnter: afterEnter,
                onLeave,
                onAfterLeave: afterLeave
              }, {
                default: () => VueGlobal.h('div', { class: 'details-content', style: { display: opened.value ? undefined : 'none' } }, [
                  VueGlobal.h('div', { class: 'details-content-inner' }, ctx.slots.default ? ctx.slots.default() : null)
                ])
              })
            ]);
          };
        }
      });

      // é™„åŠ  scopeIdï¼ˆä¿æŒ CSS data-v-xxxxx å·¥ä½œï¼‰
      const CommonStatusScoped = attachScope(CommonStatus, [['__scopeId', 'data-v-6dac0e4c']]);

      // --- WsHeader ---
      const WsHeader = defineComponent({
        __name: 'WsHeader',
        setup() {
          const { statData } = useStatData();
          const lines = computed(() => {
            const arr = r(statData.value, 'å¤©ä¸‹é—».å’å¹', ['ï¼ˆæš‚æ— è¯—ç¯‡ï¼‰']);
            const first = String(arr[0] || 'ï¼ˆæš‚æ— è¯—ç¯‡ï¼‰').replace(/\\\\n/g,'\n').replace(/\\n/g,'\n');
            return first.split('\n').filter(line => line.trim() !== '');
          });
          return () => VueGlobal.h('div', { class: 'scroll-header', 'data-v-wushuang-header': '' }, [
            VueGlobal.h('div', { class: 'master-ui-title' }, [ VueGlobal.h('h1', null, 'æ— åŒå¿—') ]),
            VueGlobal.h('div', { class: 'scroll-poem-container' }, [
              VueGlobal.h('h1', null, 'å®¿å‘½è¯—'),
              VueGlobal.h('div', { class: 'poem-grid' }, lines.value.length === 0 ? [ VueGlobal.h('p', null, 'ï¼ˆæš‚æ— ï¼‰') ] :
                [0,2,4,6].map(i => VueGlobal.h(VueGlobal.Fragment, { key: i }, [
                  VueGlobal.h('p', null, lines.value[i] || '...'),
                  VueGlobal.h('p', null, lines.value[i+1] || '...')
                ]))
            ])
          ]);
        }
      });
      const WsHeaderStyled = attachScope(WsHeader, [['__scopeId','data-v-wushuang-header']]);

      // --- WsWorld ---
      const WsWorld = defineComponent({
        __name: 'WsWorld',
        setup() {
          const { statData } = useStatData();
          const time = computed(() => r(statData.value, 'ä¸–ç•Œ.æ—¶é—´', ['æœªçŸ¥æ—¶é—´'])[0]);
          const place = computed(() => r(statData.value, 'ä¸–ç•Œ.åœ°ç‚¹', ['æœªçŸ¥åœ°ç‚¹'])[0]);
          return () => VueGlobal.h('div', { class: 'world-status', 'data-v-77b8dafd': '' }, [
            VueGlobal.h('p', { class: 'world-info' }, [
              VueGlobal.h('span', { class: 'info-icon' }, 'â³ï¸'),
              VueGlobal.h('span', { class: 'info-label' }, 'æ—¶é—´:'),
              VueGlobal.h('span', { class: 'value-main' }, time.value)
            ]),
            VueGlobal.h('p', { class: 'world-info' }, [
              VueGlobal.h('span', { class: 'info-icon' }, 'ğŸ“'),
              VueGlobal.h('span', { class: 'info-label' }, 'åœ°ç‚¹:'),
              VueGlobal.h('span', { class: 'value-main' }, place.value)
            ])
          ]);
        }
      });
      const WsWorldStyled = attachScope(WsWorld, [['__scopeId','data-v-77b8dafd']]);

      // --- WsProtagonist ---
      const WsProtagonist = defineComponent({
        __name: 'WsProtagonist',
        setup() {
          const { statData } = useStatData();
          const protagonist = computed(() => r(statData.value, 'ä¸»è§’', {}));
          const propsList = computed(() => [
            { k: 'å£°æœ›', i: 'fa-star-half-alt', v: r(protagonist.value, 'å£°æœ›', ['--'])[0] },
            { k: 'å®˜èŒ', i: 'fa-scroll', v: r(protagonist.value, 'å®˜èŒ', ['--'])[0] },
            { k: 'è¡€è„‰', i: 'fa-dna', v: r(protagonist.value, 'è¡€è„‰', ['--'])[0] },
            { k: 'æ­¦åŠ›', i: 'fa-gavel', v: r(protagonist.value, 'æ­¦åŠ›', [0])[0] },
            { k: 'è°‹ç•¥', i: 'fa-brain', v: r(protagonist.value, 'è°‹ç•¥', [0])[0] },
            { k: 'é­…åŠ›', i: 'fa-heart-circle-bolt', v: r(protagonist.value, 'é­…åŠ›', [0])[0] },
          ]);
          const skills = computed(() => Object.entries(c(r(protagonist.value, 'ä»™æœ¯[0]', {}))));
          return () => VueGlobal.h(CommonStatusScoped, { title: 'ä¸»è§’', icon: 'ğŸ‘¤', defaultOpen: true }, {
            default: () => [
              VueGlobal.h('div', { class: 'ws-section-content', 'data-v-wushuang-char': '' }, [
                VueGlobal.h('div', { class: 'char-property-grid' }, propsList.value.map(p => VueGlobal.h(VueGlobal.Fragment, { key: p.k }, [
                  VueGlobal.h('i', { class: ['fa-solid', p.i, 'char-icon'] }),
                  VueGlobal.h('span', { class: 'char-prop-name' }, p.k),
                  VueGlobal.h('span', { class: 'char-prop-value' }, p.v)
                ]))),
                VueGlobal.h('hr'),
                VueGlobal.h('h4', null, 'ä»™æœ¯/æŠ€èƒ½'),
                skills.value.length > 0 ? skills.value.map(([k, v]) => VueGlobal.h(CommonStatusScoped, { key: k, title: r(v,'åç§°',[k])[0], variant: 'sub-section' }, {
                  default: () => [ VueGlobal.h('div', { class: 'ws-sub-section-content' }, r(v, 'æè¿°', ['æš‚æ— æè¿°ã€‚'])[0]) ]
                })) : VueGlobal.h('p', { class: 'empty-state-text' }, '(ç©º)')
              ])
            ]
          });
        }
      });
      const WsProtagonistStyled = attachScope(WsProtagonist, [['__scopeId','data-v-wushuang-char']]);

      // --- WsHangnang ---
      const WsHangnang = defineComponent({
        __name: 'WsHangnang',
        setup() {
          const { statData } = useStatData();
          const equip = computed(() => r(statData.value, 'è¡Œå›Š.è£…å¤‡', {}));
          const equipList = computed(() => [
            { k: 'æ­¦å™¨', i: 'fa-khanda', v: r(equip.value, 'æ­¦å™¨', ['--'])[0] },
            { k: 'é˜²å…·', i: 'fa-shirt', v: r(equip.value, 'é˜²å…·', ['--'])[0] },
            { k: 'é¥°å“', i: 'fa-gem', v: r(equip.value, 'é¥°å“', ['--'])[0] },
          ]);
          const bag = computed(() => Object.entries(c(r(statData.value, 'è¡Œå›Š.èƒŒåŒ…[0]', {}))));
          return () => VueGlobal.h(CommonStatusScoped, { title: 'è¡Œå›Š', icon: 'ğŸ’' }, {
            default: () => [
              VueGlobal.h('div', { class: 'ws-section-content no-padding', 'data-v-wushuang-char': '' }, [
                VueGlobal.h(CommonStatusScoped, { title: 'è£…å¤‡', variant: 'sub-section', defaultOpen: true }, {
                  default: () => [
                    VueGlobal.h('div', { class: 'ws-sub-section-content' }, [
                      VueGlobal.h('div', { class: 'char-property-grid' }, equipList.value.map(o => VueGlobal.h(VueGlobal.Fragment, { key: o.k }, [
                        VueGlobal.h('i', { class: ['fa-solid', o.i, 'char-icon'] }),
                        VueGlobal.h('span', { class: 'char-prop-name' }, o.k),
                        VueGlobal.h('span', { class: 'char-prop-value' }, o.v)
                      ])))
                    ])
                  ]
                }),
                VueGlobal.h(CommonStatusScoped, { title: 'èƒŒåŒ…', variant: 'sub-section' }, {
                  default: () => [
                    VueGlobal.h('div', { class: 'ws-sub-section-content' }, bag.value.length > 0 ? bag.value.map(([o, c_]) => VueGlobal.h('div', { key: o, class: 'item-row' }, [
                      VueGlobal.h('span', { class: 'value-main' }, r(c_, 'åç§°', [o])[0]),
                      VueGlobal.h('span', { class: 'property-name' }, 'x ' + r(c_, 'æ•°é‡', [0])[0])
                    ])) : VueGlobal.h('p', { class: 'empty-state-text' }, '(ç©º)'))
                  ]
                })
              ])
            ]
          });
        }
      });
      const WsHangnangStyled = attachScope(WsHangnang, [['__scopeId','data-v-wushuang-char']]);

      // --- WsFates ---
      const WsFates = defineComponent({
        __name: 'WsFates',
        setup() {
          const { statData } = useStatData();
          const list = computed(() => Object.entries(c(r(statData.value, 'ç»“ç¼˜å½•[0]', {}))));
          return () => VueGlobal.h(CommonStatusScoped, { title: 'ç»“ç¼˜å½•', icon: 'ğŸ’' }, {
            default: () => [
              VueGlobal.h('div', { class: 'ws-section-content no-padding', 'data-v-wushuang-char': '' }, 
                list.value.length > 0 ? list.value.map(([o, c_]) => VueGlobal.h(CommonStatusScoped, {
                  key: o,
                  title: r(c_, 'å§“å', [o])[0],
                  variant: 'sub-section',
                  summaryDetails: `å¥½æ„Ÿ: ${r(c_, 'å¥½æ„Ÿåº¦', [0])[0]}`
                }, { default: () => [ VueGlobal.h('div', { class: 'ws-sub-section-content' }, '... (å†…å®¹å¾…å®ç°) ...') ] })) : VueGlobal.h('p', { class: 'empty-state-text' }, '(ç©º)')
              )
            ]
          });
        }
      });
      const WsFatesStyled = attachScope(WsFates, [['__scopeId','data-v-wushuang-char']]);

      // --- WsNews ---
      const WsNews = defineComponent({
        __name: 'WsNews',
        setup() {
          const { statData } = useStatData();
          const qiwens = computed(() => String(r(statData.value, 'å¤©ä¸‹é—».å¥‡é—»', ['ï¼ˆæš‚æ— å¥‡é—»ï¼‰'])[0]).replace(/\\n/g, '<br>'));
          const plot = computed(() => String(r(statData.value, 'å¤©ä¸‹é—».å½“å‰å‰§æƒ…', ['ï¼ˆæš‚æ— å‰§æƒ…ï¼‰'])[0]));
          return () => VueGlobal.h(CommonStatusScoped, { title: 'å¤©ä¸‹é—»', icon: 'ğŸ“°' }, {
            default: () => [
              VueGlobal.h('div', { class: 'ws-section-content no-padding', 'data-v-wushuang-char': '' }, [
                VueGlobal.h(CommonStatusScoped, { title: 'å¥‡é—»', variant: 'sub-section', defaultOpen: true }, {
                  default: () => [ VueGlobal.h('div', { class: 'ws-sub-section-content', innerHTML: qiwens.value }) ]
                }),
                VueGlobal.h(CommonStatusScoped, { title: 'å½“å‰å‰§æƒ…', variant: 'sub-section', defaultOpen: true }, {
                  default: () => [ VueGlobal.h('div', { class: 'ws-sub-section-content' }, plot.value) ]
                })
              ])
            ]
          });
        }
      });
      const WsNewsStyled = attachScope(WsNews, [['__scopeId','data-v-wushuang-char']]);

      // --- ä¸»åº”ç”¨ App ---
      const AppRoot = defineComponent({
        __name: 'App',
        setup() {
          const { loading, error } = useStatData();
          return () => {
            return VueGlobal.h('div', { class: 'layout', 'data-v-4aab5234': '' }, [
              VueGlobal.h(WsHeaderStyled),
              VueGlobal.h(WsWorldStyled),
              loading.value ? VueGlobal.h('p', { class: 'empty-state-text' }, 'æ­£åœ¨åŠ è½½...') :
              error.value ? VueGlobal.h('p', { class: 'empty-state-text' }, 'åŠ è½½å‡ºé”™: ' + error.value) :
              VueGlobal.h(VueGlobal.Fragment, null, [
                VueGlobal.h(WsProtagonistStyled),
                VueGlobal.h(WsHangnangStyled),
                VueGlobal.h(WsFatesStyled),
                VueGlobal.h(WsNewsStyled)
              ])
            ]);
          };
        }
      });
      const AppStyled = attachScope(AppRoot, [['__scopeId','data-v-4aab5234']]);

      // --- å¯åŠ¨å™¨ ---
      document.addEventListener('DOMContentLoaded', () => {
        try {
          const pinia = PiniaGlobal.createPinia();
          const app = createApp(AppStyled);
          app.use(pinia);
          app.mount('#app');
          console.log('--- [æ— åŒå¿— Vueç‰ˆ æ•´åˆç‰ˆ] å·²å¯åŠ¨ ---');
        } catch (err) {
          console.error('å¯åŠ¨å¤±è´¥:', err);
        }
      });
    })();
  </script>
</body>
</html>
